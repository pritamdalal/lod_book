[
["index.html", "Learning Options from Data Preface Delta-Neutral Historical Data How to read this book Structure of the book Acknowledgments", " Learning Options from Data Pritam Dalal Preface Delta-Neutral Historical Data Nearly all the data analysis examples in this book come from the historical options data that has been contributed by Delta-Neutral. This is a phenominal data set of the highest quality that contains daily option prices for all the options traded on thousands of equity underlyings. The full data set dates back to 2002. How to read this book Structure of the book Acknowledgments The layout of this book was adapted from the bookdown file of R Markdown: The Definitive Guide“. Many thanks to Yihui Xie for making the files freely available on Github. Pritam Dalal Minneapolis, Minnesota "],
["author.html", "About the Author", " About the Author Pritam Dalal founded Options Data Science in 2018. Prior to that he held a variety of trading and analysis roles at firms including Cargill, Wolverine Trading, Two Harbors Investment Corp, and Allianz Investment Management. Pritam is an adjunct professor in the Mathematics Department at the University of Minnesota, where he teaches R and Python to graduate students. Pritam holds a Bachelors in Mathematics and Economics from the University of California, Berkeley as well as a Masters in Financial Mathematics from the University of Minnnesota, Twin Cities. "],
["options-introduction.html", "Chapter 1 Options Introduction 1.1 Car Insurance 1.2 Vanilla Options 1.3 Long vs Short", " Chapter 1 Options Introduction The purpose of the chapter is to introduce options as painlessly as possible. Options are simple contracts that show up everywhere in finance. They can be viewed as the building block of many other financial instruments. The theory of option pricing lies at the foundation of much of quantitative finance. Options are insurance contracts wrapped around other financial assets. The asset that is being insured is called the underlying. The underlyings we are going to consider in this book will be stocks and ETFs, but the essential concepts are the same for other underlyings such as interest rates, corn futures, or barrels of oil. Let’s build some intuition by considering a type of insurance that you are probably familiar with: car insurance. 1.1 Car Insurance Wolverine Trading is a successful market-making firm based in Chicago. Following the lead of billionaire Warren Buffet, who’s major cash-cow is GEICO, the partners at Wolverine are interested in getting into the car insurance business. They have hired us as consultants to help devise a pricing policy for this business. The type of underlying that Wolverine would like to insure is: a specific driver coupled with a specific vehicle. The driver that is being insured is going to pay Wolverine premium. In exchange for the premium, Wolve will reimburse the driver whenever damage to the care exceeds a certain dollar amount, called the strike of the contract. Intuition Check: Do you think that Wolverine should charge the same premium irrespective of the underlying? Why or why not? After some deliberation, we have arrive upon the following contract and underlying characteristics to base the pricing policy on: price of the underlying, strike, time to expiration, volatility of the underlying. Price of Underlying Sandra is a prospective customer; she has two vehicles that she wants to switch over. One is a busted old Mazda 3 that she bought when she was a struggling graduate student. The other is a fancy self-driving Tesla she bought after starting her lucrative options trading career. -ADD SIDE BY SIDE PICTURES HERE- Intuition Check: Which car should be more expensive to insure? Why? Strike Price of Contract Wolverine has three different strike prices that they can offer Sandra Tesla: at-the-money \\(:=\\) $0 $1,000 $5,000 Exercise: Order the premium for the three strike prices from cheapest to most expensive. Time to Expiration Wolve has three different strike prices they can offer to Sandra for her Tesla: 0.25 years 0.50 years 1.00 years Exercise: Order the premium for the three tenors from cheapest to most expensive. Voltility of Underlying Wolve is pricing insurance for two different customers, Sally and Patty. Both are looking to purchase insurance a fancy new self-driving Tesla. They both want a 1-year contract with with a $1,000 strike price. Sally’s friends describe her as calm, chill, responsible, quiet, serene. On the other hand, Patty’s friends describe her: wild, hyper, flakey, loud, and volatile. Intuition Check: Who should Wolverine charge more for insurance? Why? Insurance Payoff Graph It’s 8 a.m. on a Saturday morning. Sally is driving on the freeway heading to her Crossfit class: hands at 10-and-2, eyes intently on the road, soothing classical music playing in the background. Patty is also driving on the freeway, making her way home from an all night rave. As she drives, she touches up her makeup and then snaps a few selfies for her IG stories (morning car selfies have the best light..OMG). Suddenly, Patty loses control and swerves in front of Sally. Patty is riding dirty and has no insurance, but responsible Sally a made sure to switch over to a $1000-strike Wolverine policy. Here is a graph of the payoff to her insurance contract immediately following the accident. strike &lt;- 1000 damage &lt;- seq(0, 3000, 500) payoff &lt;- pmax(damage - strike, 0) heading &lt;- &quot;insurance payoff&quot; plot(damage, payoff, type = &quot;n&quot;, main = &quot;Payoff to Sally&quot;) lines(damage, payoff, type = &quot;l&quot;) Notice that if the damage is less than the $1,000 strike price, Sally recieves no reimbursement from her insurance. For every dollar over the strike price, Sally recieves a one-for-one payout. The options we study in the book behave similarly. 1.2 Vanilla Options Options come in many different varieties: European, American, Asian, digital, look-back, etc. European and American options are considered the simplest and for that reason they are collectively referred to as vanilla options. All other options are considered more complicated and are therefore referred to as exotic. Vanilla options are transacted in far greater volumes than exotics, and nearly all publicly traded options are vanilla. In this book we will focus exclusively no vanilla options. American Options as Insurance American (equity) options are insurance contracts that have as their underlying publicly traded stocks. They are called options because owning them gives you a right to do something, but you are not required to exercise that right. You have the option exercise if it happens to be beneficial to you. This right with out obiligation has the effect of creating an insurance benefit for the option holder. American options come in two varieties: puts and calls. Put contracts are insurance for those who already own the stock and intend to sell it in the future; they are protection against the price of the stock falling before they’ve had a chance to sell it. Call contracts are insurance for those who intend to buy stock in the future; they are protection against the price of the stock rising before they’ve had a chance to buy it. In reality, you don’t have to purchase the puts and calls as insurance. You don’t have to own the underlying to buy a put. If you do happen to own the underlying, you don’t have to intend to sell it. Nor do you have to intend the underlying in the future in order to buy calls. You can buy or sell either types of contracts to express different views on the underlying. American Option Contract Specification After a lot of hand waving, we are finally ready to give a proper contract specification for American options. You’re probably tingling with anticipation…prepare to be let down (things won’t get interesting for a couple of years). Let’s consider American options on some stock \\(S\\). Puts and calls on \\(S\\) are defined by two additional contract features: strike price and expiration date. Call: a contract that gives the right, but not the obligation, to **buy* a share of \\(S\\) at the strike price any time before the expiration date. Put: a contract that gives the right, but not the obligation, to sell a share of \\(S\\) at the strike price any time before the expiration date. Option Buyers and Option Sellers There are two sides to every options transaction. The option buyer, pay premium and owns a right. The option seller, on the other hand, receives premium and is obligated to respect the right that the buyer has purchased. In the case of puts, if the option buy exercise their right to sell the underlying, the option seller must buy the underlying from them. In the case of calls, if the option buyer exercise their buy the underlying the option seller is obligate to sell it to them. Note: sentences like those in the previous paragraph can be a little confusing at first. There are a lot of “buys” and “sells”&quot; floating around. Don’t worry, it will get less confusing over time, and at some level you will never get over needing to slow down and go back to the definition of puts and calls. Exercises: Ruobing has purchased an American call on SPY, with a strike price of $250. He paid $10 in premium. Farez was the option seller on this transaction. It’s now the final day of the contract and Ruobing has still not exercised his right. Under what circumstances will Ruobing choose to excericse his right? Under what circumstances does Ruobing make money? Under what circumstances does Farez make money? What are the min and max of Ruobing’s PNL (include premium)? What are the min and max of Farez’s PNL (include premium)? Answer the same questions for a put with the same strike, expiration, and premium. European vs American European options are very similar to Americans. The only difference is that the owner of a European option can only exercise their right immediately after the final trading day of the contract. Recall that with American the option holder can early exercise at any point before expiration. To summarize: European options have an exercise date (point). American options have an exercise window - starting today, and ending on expiration. It turns out that in most cases it is not optimal to early exercise an American option (we will explore these arguments in the following chapter). For this reason, we will consider American and European the options as being the same (only the most pedantic of quants will take issue with this). Because there is only one point of time at which a European option can be exercised, the notion of a payoff function is completely straight-forward: it is the value of exercising at the time of expiration. With American options, the notion of a payoff function is complicated by the possibility of early exerise. However, we will lean on the fact that it is almost never optimal to early exercise an American options, and define their payoff function as the value of exercising at the time of expiration. Payoff Function At this point I will introduce some mathematical notation, as it become more efficient to communicate about options with a bit of notation (but not too much). Suppose the current date is \\(t\\) . Consider a put and call on the same underlying, both with expiration \\(T &gt; t\\), both with strike price \\(K\\). Let \\(S_{T}\\) be the price of the stock at expiration. Let \\(\\pi_{b}\\) be the put buyer’s payoff, and let \\(\\pi_{c}\\) be the call buyer’s payoff. Then we have that: Put Buyer Payoff: \\(\\pi_{p}(S_{T}) = max \\big \\{(K - S_{T}),0 \\big \\}\\) Call Buyer Payoff: \\(\\pi_{c}(S_{T}) = max \\big \\{(S_{T} - K), 0 \\big \\}\\) Exercises: Convince yourself that the above is true given the contract specification of vanilla puts and call. Graph \\(\\pi_{p}\\) and \\(\\pi_{c}\\) as a function of \\(S_{T}\\). Write the expressions for seller’s payoff of both puts and calls. Draw the graphs. Total PNL takes into account the option premium. Let \\(m_{p}\\) be the put premium, and lets \\(m_{c}\\) be the call premium. Modify all four of your graphs to be total pnl functions, rather than payoff functions. If we consider \\(\\pi_{p}\\) and \\(\\pi_{c}\\) as functions of \\(S_T \\in (0, +\\infty)\\), then both function are differential at all points except for \\(S_T = K\\). What are the two values of \\(\\frac{d\\pi_{c}}{dS_{T}}\\)? What are the two values of \\(\\frac{d\\pi_{p}}{dS_{T}}\\)? Suppose that the current time is \\(t&lt;T\\), so prior to the expiration of the options, and let \\(S_{t}\\) is the current price of the stock. If you own the put, which inequality do you hope is true between \\(S_{t}\\) and \\(S_{T}\\). What ineqality do you hope holds true between between \\(S_{T}\\) and \\(K\\)? If you own the call, which inequality do you hope is true between \\(S_{t}\\) and \\(S_{T}\\)? How about between \\(S_{T}\\) and \\(K\\)? 1.3 Long vs Short If you spend time around financial markets you are likely to encounter the jargon terms “long” and “short”. These terms can be a bit confusing to the uninitiated, but they are a useful shorthand. In this section we unpack this jargon, as we will make use of it in the rest of the text. Buyers vs Sellers Let’s return to the car insurance industry for a moment. In any transaction there is a buyer and a seller. In the car insurance market there are certain classes of entities that buy the insurance, and other classes of entities that sell the insurance. For example, I have purchased car insurance from State Farm and GEICO (you’re welcome Warren). However, there would never be a situation in which GEICO or State Farm would buy an insurance policy from me. Options markets are different. Many different kinds of entities - market-makers, hedge-funds, retail traders - buy options as well as sell options. For example, on given trading day, I may sell an option which a hedge-fund my buy from me on an exchange. On the following day, I may buy a different option from that same hedge fund. Said in a different way, in options market, any particular entity can simultaneously be a buyer of options and a seller of options. Net Position As you saw in earlier exercises, the payoff of the option sell is the negative of the payoff of the option buyer. So let’s associate the number \\(+1\\) with the act of buying an option, and let’s associate the number \\(-1\\) with the act of selling an option contract. More generally, we can associate a quantity number \\(Q\\) with an options trade. If \\(Q&gt;0\\) then the trade is the buy \\(Q\\) options. If \\(Q &lt; 0\\) then the trade is to sell \\(|Q|\\) options. Suppose a trader Lewei has engaged in \\(n\\) trades on a particular contract \\(\\mathcal{O}\\). and that the quantities of the trades were \\(Q_{1}, \\ldots, Q_{n}\\). Liwei’s net position in the option \\(\\mathcal{O}\\) is \\(Q^{*}\\) where \\[\\begin{align*} Q^{*} = \\sum_{i=1}^{n} Q_{i}. \\end{align*}\\] This concept of net position brings us to our first meanings of long and short: Long: If \\(Q^{*}&gt;0\\) we say that Lewei is long \\(Q^{*}\\) contracts of \\(\\mathcal{O}\\). More generally, we would say that Lewei has a net long position in \\(\\mathcal{O}\\). Short: If \\(Q^{*}&lt;0\\) we say that Lewei is short \\(|Q^{*}|\\) contracts of \\(\\mathcal{O}\\). More generally, we would say that Lewei has a net short position in \\(\\mathcal{O}\\). More informally, we would say that you are long a contract if you are a net buyer of the contract, and you are short the contract if you are a net seller of the contract. Value The other meanings of long/short have to do with how you fare given how the value/price of an asset changes. You are long an asset if you make money when the value of that asset goes up. You are short an asset if you make money when the value of that asset goes down. So for example, if you hold AAPL in your 401(K), then you are long AAPL because the value of your retirement increase when Apple’s stock price rises. Similarly, if you have a net short position in a call, then you are short that call (in both senses) because when the value of the call rises, you lose money because that is your liability. Things get a little confusing when we mix the two meanings of long/short in the context of options. Enjoy the following exercises - such sentences are ubiquitous in options markets: Exercises: If you have a net long position in a put, are you long or short the underlying? If you have a net short position in a put, are you long or short the underlying? If you have a net long position in a call, are you long or short the underlying? If you have a net short position in a call, are you long or short the underlying? "],
["basic-results.html", "Chapter 2 Basic Results 2.1 Arbitrage 2.2 Stocks &amp; Dividends 2.3 Exchange Traded Funds (ETFs) 2.4 Discounting &amp; Accumulating 2.5 Option Contracts 2.6 Forward Contracts 2.7 Put-Call Parity 2.8 Rational Option Pricing", " Chapter 2 Basic Results In this section I introduce basic concepts and results from quantitative finance that will be needed later in the book. For a more detailed treatment, I recommend the following execellent texts: Options, Futures, and Other Derivatives by John C. Hull Derivative Markets by Robert L. McDonald 2.1 Arbitrage An arbitrage is a risk-less profit that requires no initial investment. A basic tenets of finance is that arbitrage opportunities should not exist in the markets. The reason goes, if there an arbitrage exists, market participants will pile onto the trade and thus move prices until the arb no longer exists. Mathematically minded nerds with lots of time on their hands use arbitrage related arguments to prove theorem about the nature of markets. In doing so, they tend to stylized and somewhat questionable assumptions about markets, glossing over certain details to make their mathematical stories work. Abitrage arguments are highly academic in nature, and plenty of that work is of limited importance to finance practitioners (or anyone for that matter). There is, however, a strong kernel of truth to these arguement. If markets signficantly breach so-called no arbitrage prices, then there will be very safe and profitable trades in the market. Traders will eventually catch on to the these trades, which will cause prices to move toward the no-arbitrage levels. Keep your eyes peeled for arbs in the market. And if you find one, please call me. I am going to present some arbitrage arguments in this chapter. This is in part because I’m a recovering quantitative finance nerd, and writing this book is something of a relapse for me. It’s also because I occassionally get questions from students that requires resorting to arbitrage arguments. Out of of a genuine interest for their well beings, I try to let the know that getting caught up such details is a frivolous waste of time. And even though it pains me to contribute to their pathology by ingulging in such pedantry, I figure they have paid tuition so I probably owe them an answer. I envy those of you who can take the statements of fact in this chapter as given, and then simply move on to more elevated pursuits. 2.2 Stocks &amp; Dividends Companies can raise funds to grow their business by issuing shares of stock. The buyer of the stock - often called a shareholder - pays money to the comapany which the company keeps forever. In return, the shareholder is entitled to a fraction of the companies future profits and also has the ability to vote on certain matters at shareholder meetings. A crucial point is that the owner of a stock has limited liability with resepct to the company. The worst thing that can happen is that shareholder never recieves any profits, and the stock itself also becomes worthless. So, for example, if the company is caught illegally polluting, the shareholder cannot be sued for damages. In this sense the value of stock can never be negative. Once a stock has been issued by a company, the owner of the stock can sell it to another invester. This is called a secondary market transaction. Once the share has been sold in the secondary market, the claims to profits and the voting rights are both transfered to the purchaser. Secondary market transactions occur on exchanges, like the New York Stock Exchange, and are usually what people are referring to when they talk about the stock market. These transactions occur via complicated auction mechanisms that match buyers and sellers. The mechanisms are such that the actual trade prices can fluctuate (sometimes greatly) from transaction to transaction. Here are some example of companies who’s stocks trade heavily in the secondary markets. AAPL - Apple (you seriously have an Android bro) GOOG - Alphabet (dude iPhones are totally overrated) FB - Facebook (please like my pictures and make me feel cool) XOM - Exxon Mobile (I’m self-righteous about the environment…until I check my 401K) Suppose you want to trade a share of stock, and you want to be able to fill your trade immediately. If you are a buyer of the stock, you will be charged a certain amount called the ask price. If you are a seller of the stock you will recieve a certain amount called the bid price. The bid price is lower than the ask price. These so-called bid-ask spreads exist in other financial markets as well, including options markets. If you are a market for a particular stock, there are three prices that you will surely need to keep your eye one. The current bid price, the current ask price, and the last price at which a trade occurred. We will often refer to the price of a stock at time \\(t\\) and denote by \\(S_{t}\\). We can ofen gloss over what the phrase the price of the stock exactly means, you can safely choose to interpret it in one of two way: 1) the current mid price, which is as the average of the bid and ask at time \\(t\\); 2) the last trade price as of time \\(t\\). For stocks that have high trading volume, these two values will be usually quite close - but this is not always the case. The upshot of our previous discussion about exchanges is that \\(S_{t}\\) varies through time. As it turns out, it is useful to think of the of \\(S_{t}\\) as a series of random variable. In fancy math circles this is know as a stochastic process. It is my intention to try to avoid the nerdery of fancy math as much as possible, but sometimes we will be forced to indulge is such evils. My apologies in advanced. When profits are distributed to the owners of a stock, this is done on a per share basis. The amount that is paid per share is called a dividend payment. It is reasonable to wonder whether issuing a dividend payment has any near-term impact on the price of the stock. This question leads to our first qunatitative result. Theorem: Suppose that a stock is going make a divided payment of \\(c\\) at time \\(T\\) and that just prior to the dividend payment is trading at a price of \\(S^{*}\\). Then then price of the stock just after the divident payment is \\(S_{T} = S^{*} - c\\). Properly defining the concept of a share of stock is a complicated legal exercise. Similarly, an accurate description of how stocks are sold in the secondary market would require it’s own large (and boring) book. The amount of detail you will depend on your use-case. For example, if you are an attorney that works on IPOs, you will need to know a lot about the legal stuff. If you are a creating statistical arbitrage strategies, you will need be an expert on exchange microstructure. For the purposes of this book, the following stylized facts will suffice. Stocks give their claims to the companies profits. This is a limited liability investment in that the value of a stock can never be negative. After their initial issuance, Share of stock can be in the secondary market. Trading of stocks on the secondary market occurs on exchanges, with trades occurring thousands or millions of times a day during business hours. The exchange creates complex auction mechanisms to match buyers and seller. The rules are such that trades can occur and different prices for every transaction. The stream of trade prices is often denoted as \\(S_{t}\\) can be conceptualized as a stochastic process. Profits are paid out to shareholders in the form of a per-share payment called a dividend. Immediately after the payment of a dividend, the stock price will reduce by the amount of the dividend. 2.3 Exchange Traded Funds (ETFs) Investing in stocks and other assets is usually an overly costly and complex proposition for an individual. For this reason, there are various vehicles for small investors to pool their money, and for it to then be invested under the auspices of invmentment professionals. The most common for of investment pooling is a mutual fund. More esoteric manifestations are hedge funds, unit invesment trust (UIT), and real estate investment trusts (REIT). The distinction between these is of general interest, but won’t be of huge importance to us in this book. A fairly recent innovation in the world of pooled invesments is exchange traded funds (ETFs). Relative to mutual funds and hedge funds, ETFs engage in simpler strategies that are easier to execute. For this reason, it take fewer people to manage the fund and costs are low. In additon, sharte of ETFs are traded on exchanges in the exact same way as share of stock. ETFs also pay dividends in the same way that stocks do. Here are some popular ETFs: SPY - SPDR SP500 - tracks the S&amp;P500. IWM - iShares Russell 2000. GLD - invests in gold future. XLF - SPDR Financial - tracks the performance of financial services sector. For the purpose of this course, we will treat stocks and ETFs as largely the same. 2.4 Discounting &amp; Accumulating When you lend money, you are paid interest to compensate for the fact that you can’t use the money to lent for other purposes. In this book I assume loans are totally safe and there is no risk of default. It is useful to the of the loan amount accumulating with interest. I use the following notation and nomenclature to capture this idea of accumulation: Definition: Assume the current time is \\(t\\) and that \\(T\\) is some time in the future. Then one dollar will accumulate to \\(A(t,T)\\) by time \\(T\\). I will call \\(A(t,T)\\) an accumulation factor. If you are going to recieve money in the future, it’s not really worth as much to you as if the money were paid right now. The way we account for this value difference is by essentially discounting by the amount of interest you could have earned between now when you are going to be paid. The is the notion of present value and I express it as follows: Definition: The time \\(t\\) present value of a one dollar cashflow at time \\(T\\) will be denoted by \\(D(t,T)\\). I will call \\(D(t,T)\\) a discount factor. I will call \\(D(t, T)\\) a discount factor. The following statements are true: \\(A(t,T) \\geq 1\\). \\(D(t, T) \\leq 1\\). \\(D(t,T) = A(t,T)^{-1}\\). Definition: Suppose the current time is \\(t\\) and consider a series of cashflows \\(C_{1}, \\ldots, C_{n}\\) occurring at future times \\(t_{1}, \\ldots t_{n}\\). Then the time \\(t\\) present value of this stream of cashflows is defined as: \\[\\begin{align*} PV(\\{ C_{1}, \\ldots, C_{n} \\}) = \\sum_{i = 1}^{n} D(t, t_{i}) \\cdot C_{i}. \\end{align*}\\] 2.4.0.1 Forward Accumulating Suppose that the current time is \\(t\\) and that \\(T\\) is some time in the (distant) future. Suppose you know at for all \\(s \\in (t, T)\\) that all the values of \\(A(t,t)\\). This is set of accumulation factors is known as the spot yield curve (it is usually quoted in rates, but the idea is the same). Now, suppose for some particular \\(t^* \\in (t, T)\\) you want to work out an arrangement with your bank such that you will deposit one dollar at time \\(t^*\\) and let it accumulate until \\(T\\). What is the accumlation factor that you should earn? It turns out that this forward accumulation factor is determined by the spot yield curve. We will denote the quantity \\(A(t, t^*, T)\\). There is a simple no-arbitrage argument for this but I won’t bother presenting it here becuase it’s not import. All you need to know is that it satisfies the following equation \\[\\begin{align*} A(t, T) = A(t, t^*) \\cdot A(t, t^*, T) \\end{align*}\\] 2.5 Option Contracts We discussed vanilla (American and European) options at length in the previous section, but I wll 2.6 Forward Contracts Forward contracts are simple derivatives that are one of the foundational building blocks in the theory and practice of quantitative finance. The value of forwards are related to option prices via a result known as put-call parity, a finding seminal to much of derivatives theory. 2.6.1 Specification and Payoff A forward contract this the obligation to transact some underlying asset at some future date, at a fixed price, called the strike price. The party that agrees to buy the underlying, is called the long side; the party that agrees to sell the underlying is the short side. The underlyings we will consider in this book will be stocks or ETFs, but forwards can exist on any kind of underlying: gold, corn, etc. The key feature of a forward is that both sides are obligated to execute their side of the transaction - to either buy our sell the asset, at the agreed upon strike price. This stands in contrast to an option, in which the long side has a right, while the short side has an obligation. Suppose a forward contract struck at \\(K\\) expires at time \\(T\\). Suppose that underlying is trading at \\(S_{T}\\) at the time of expiration. The long side has to pay \\(K\\) and in return receives the underlying which has a value of \\(S_{T}\\). Thus the long position is worth \\(S_{T} - K\\) at expiration. On the other hand, the short side recieves \\(K\\) but has to deliver the underlying, which is worth \\(S_{T}\\). So the short position is worth \\(K - S_{T}\\). Long Payoff: \\(S_{T} - K\\) Short Payoff: \\(S_{T} - K\\) 2.6.2 The Forward Price Suppose that the current time is \\(t\\) and that we are considering a forward contract that expires at time \\(T\\). Suppose further that the underlying is currently trading at \\(S_{t}\\). We are interested in the following questions: is there strike price of \\(K\\) such that both parties can enter into the forward contract for zero cost, without introducing an arbitrage opportunity for either side? It turns out the answer is yes, an this strike price is of such importance that it has been named simply, the forward price. A forward price is determined by two points in time: the current time \\(t\\) and the expiration time \\(T\\). We will denote the forward price associated with these two times as \\(F(t, T)\\). Forward Pricing Formula: Suppose we are considering a forward contract at time \\(t\\) which expires at time \\(T\\). Suppose that the underlying is currently trading at \\(S_{t}\\) and that during the life of the forward, the underlying stock pays dividends \\(c_{1}, \\ldots, c_{n}\\) at times \\(t_{1}, \\ldots, t_{n}\\). Then the we have that: \\[\\begin{align*} F(t, T) &amp;= A(t, T) \\cdot S_{t} - \\sum_{i=1}^{n} A(t, t_{i}, T) \\cdot c_{i} \\end{align*}\\] In words we have that the forward price is the accumulated value of the current stock price less the accumulated value of all the dividend payments during the life of the contract. Notice that for non-dividend paying stocks we have that: \\(F(t, T) = A(t, T) \\cdot S_{t}\\). 2.6.3 Valuing a Forward Contract Suppose that you enter into a forward contract at time \\(t^{*}\\) and the strike price \\(K\\) was chosen such that both parties could enter into the contract for zero cost. Suppose that the time is now \\(t &gt; t^{*}\\), what would be the value to unwind this contract? Fact: The no arbitrage unwind value of this contract is \\(D(t, T) \\cdot (F(t, T) - K)\\). This result really has nothing to do with the fact that the forward contract entered into at time \\(t^{*}\\) or that it’s initial strike what chosen to make it a zero value contract. Ultimately it just gives us a formula for valuing a forward contract at any point. Notice that if a forward contract is struck at the current forward price, then it has zero value, which we would expect. 2.6.4 Synthetic Forwards A portfolio consisting of a long call and a short put is a synthetic forward position. Let the current time be \\(t\\). Consider a call and put on the same underlying, with the same strike price \\(K\\), that both expire at time \\(T\\). If you have a long position in the call and a short position in the put, then in all states of the world at time \\(T\\) this portfolio has a value of \\(S_{T} - K\\), which is the same value as the payoff as a long forward. Suppose that \\(S_{T} &gt; K\\). You exercise your long call, for which you recieve the stock worth \\(S_{T}\\) whilie paying the strike price \\(K\\) for it. The put you are short expires worthless. The total value of these two positions is \\(S_{T} - K\\). On the other hand, suppose \\(S_{T} &lt; K\\). Your short put postion will be exercised, forcing you to buy the stock for \\(K\\) even though it is only worth \\(S_{T}\\). Your call is worthless, so you won’t exercise. Once again, the combined value of these two position is \\(S_{T} - K\\). If \\(S_{T} = K\\), nothing happens because both options are worthless. Doing nothing has zero value. But of course in this situation we have that \\(S_{T} - K = 0\\). 2.7 Put-Call Parity Let the current time be \\(t\\) and consider a put and a call that both expire at time \\(T\\) and that are both struck at \\(K\\). From the previous section we know that a long call and a short put create a synthetic forward struck at \\(K\\). We also know how to value any forward contract. Putting these two results together we get following put-call parity identity. \\[\\begin{align*} C(t, T, K) - P(t, T, K) = D(t, T) \\cdot (F(t, T) - K) \\end{align*}\\] Put-call parity is one of the most important and foundational results in all of derivatives theory. Let’s examine a couple special cases more closely. Non-Dividend Paying Stock Recall that when the stock pays no dividends during the life of the forward, that the forward price is simply the accumulated spot price. Thus we can \\[\\begin{align*} C(t, T, K) - P(t, T, K) &amp;= D(t, T) \\cdot (F(t, T) - K) \\\\ &amp;= D(t, T) \\cdot (A(t, T) \\cdot S_{t} - K) \\\\ &amp;= S_{t} - D(t, T) \\cdot K \\end{align*}\\] Dividend Paying Stock Suppose that during the life of the options, that the underlying stockpays dividends \\(c_{1}, \\ldots, c_{n}\\) at times \\(t_{1}, \\ldots, t_{n}\\). \\[\\begin{align*} C(t, T, K) - P(t, T, K) &amp;= D(t, T) \\cdot (F(t, T) - K) \\\\ &amp;= D(t, T) \\cdot \\bigg(A(t, T) \\cdot S_{t} - \\sum_{i=1}^{n} A(t, t_{i}, T) \\cdot c_{i} - K \\bigg) \\\\ &amp;= S_{t} - PV(\\{c_{1}, \\ldots, c_{n} \\}) - D(t, T) \\cdot K \\end{align*}\\] 2.8 Rational Option Pricing The Black-Schole pricing framework, which will discuss at lenght in later chapters, requires complex assumptions about the random nature of the underlying, and dynamic trading strategies for replicating option payoffs. These complexities are required a specific value to an option, but there is a actually a lot we can say about option prices in general without making any assumptions of the underlying. Extreme European Bounds The worst thing that can happen with a put or call is that it is not exercised, which means that they can never be worth less than zero. For a call, the best thing that can happen is that you exercise, which results in owning the stock, a call can never be worth more than the underlying stock. For a put, the best outcome is that you exercise when the stock is worthless, and you recieve \\(K\\). Thus, the put can never be worth more that \\(K\\). These facts are summarized in the following inequalities \\[\\begin{align*} 0 &amp;\\leq C_E(S, K, T) \\leq S \\\\ 0 &amp;\\leq P_E(S, K, T) \\leq K. \\end{align*}\\] Americans \\(\\geq\\) European Any strategy that you can execute with a European option, you can execute with the American variant as well. Thus we have that \\[\\begin{align*} C_A(S, K, T) &amp;\\geq C_E(S, K, T) \\\\ P_A(S, K, T) &amp;\\geq C_E(S, K, T). \\end{align*}\\] "],
["the-markets.html", "Chapter 3 The Markets 3.1 Exchanges 3.2 Brokers 3.3 Market-Makers 3.4 Other Liquidity Providers 3.5 The Buy Side", " Chapter 3 The Markets In order to participate in options markets you need to have a basic understanding of how they work. 3.1 Exchanges 3.2 Brokers 3.3 Market-Makers 3.4 Other Liquidity Providers 3.5 The Buy Side "],
["profit-loss.html", "Chapter 4 Profit &amp; Loss 4.1 Stock PNL 4.2 Option PNL 4.3 Scaling Up 4.4 Returns", " Chapter 4 Profit &amp; Loss Daily profit and loss is one of the most basic and important performance measure of an investment or trading strategy. In this chapter we detail how to calculate profit and loss for stock and options trades. 4.1 Stock PNL 4.2 Option PNL Suppose you trade an option \\(\\mathcal{O}\\) at a price \\(P\\) on trade-date \\(t_{1}\\). Suppose you hold the option until expiration, which is trade-date \\(t_{n}\\). The letter \\(i\\) will serve as an index over the trade-dates, so \\(i = 1,\\ldots,n\\). Let \\(B_{i}\\) and \\(A_{i}\\) be the end-of-day bid and ask prices of the option for trade-date \\(t_{i}\\). Note that \\(B_{n} = A_{n} =\\) option-payoff. We seek to define the following: Daily: \\(D_{i}\\) - the daily PNL for the trade as of end-of-day \\(t_i\\). TTD: \\(C_{i}\\) - the trade-to-date PNL for the trade as of end-of-day \\(t_i\\). Intuitively, the trade-to-date (TTD) PNL is the amount of money you made or lost if you unwind the trade at current market values. The daily PNL is the one day change in the trade-to-date PNL. The two concepts are interchangable in that it is possible to define TTD PNL in terms of daily PNL and vice-versa. In my own work, I find it most useful to calculate daily PNLs of each trade, and then define the cummulative PNL as the sum of the dailies. I present all both alternative below, for both buys and sells. TTD as Sum of Daily - Buy \\[\\begin{align*} D_{i} &amp;= \\begin{cases} B_{1} - P &amp; i = 1 \\\\ B_{i} - B_{i-1} &amp; i &gt; 1 \\end{cases} \\\\[10pt] C_{i} &amp;= \\sum_{k=1}^{i} D_{k} \\end{align*}\\] Exercise: Show that \\(C_{j} = B_{j} - P\\). TTD as Sum of Daily - Sell \\[\\begin{align*} D_{i} &amp;= \\begin{cases} P - A_{1} &amp; i = 1 \\\\ A_{i-1} - A_{i} &amp; i &gt; 1 \\end{cases} \\\\[10pt] C_{i} &amp;= \\sum_{k=1}^{i} D_{k} \\end{align*}\\] Exercise: Show that \\(C_{i} = P - A_{i}\\). Daily as Change in TTD - Buy \\[\\begin{align*} C_{i} &amp;= B_{i} - P \\\\[10pt] D_{i} &amp;= \\begin{cases} C_{1} &amp; i = 1 \\\\ C_{i} - C_{i-1} &amp; i &gt; 1 \\end{cases} \\end{align*}\\] Exercise: Show that both formulations of \\(D_{i}\\) are equivalent. Daily as Change in TTD - Sell \\[\\begin{align*} C_{i} &amp;= P - A_{i} \\\\[10pt] D_{i} &amp;= \\begin{cases} C_{1} &amp; i = 1 \\\\ C_{i} - C_{i-1} &amp; i &gt; 1 \\end{cases} \\end{align*}\\] Exercise: Show that both formulations of \\(D_{i}\\) are equivalent. 4.3 Scaling Up It is rare that we will calculuate the PNL of a single stock trade or options trade. Rather, we will want to calculate the PNL of a portfolio of trades. This is a trivial matter, as the daily PNL of a collection of trades is simply the sum of the daily PNL of the individual trades. [CODING EXERCISE] 4.4 Returns While PNL is an important performance metric, it is often hard to interpret with first normalzing by the amount of capital required to fund the investment. This is precisely what the notion of a return is. We will let \\(R_{i}\\) be the day \\(t_{i}\\) be the return of a trading strategy "]
]
