<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Learning Options from Data</title>
  <meta name="description" content="Learning Options from Data">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Learning Options from Data" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="pritamdalal/lod_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Learning Options from Data" />
  
  
  

<meta name="author" content="Pritam Dalal">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-markets.html">
<link rel="next" href="option-pricing.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Learning Options from Data</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#delta-neutral"><i class="fa fa-check"></i><b>1.1</b> Delta-Neutral</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-this-book"><i class="fa fa-check"></i><b>1.2</b> Why This Book</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.3</b> Who Is This Book For?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#prerequisites-further-reading"><i class="fa fa-check"></i><b>1.4</b> Prerequisites &amp; Further Reading</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#guiding-philosophies"><i class="fa fa-check"></i><b>1.5</b> Guiding Philosophies</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#acknowledgments"><i class="fa fa-check"></i><b>1.6</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#about-the-author"><i class="fa fa-check"></i><b>1.7</b> About the Author</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="options-101.html"><a href="options-101.html"><i class="fa fa-check"></i><b>2</b> Options 101</a><ul>
<li class="chapter" data-level="2.1" data-path="options-101.html"><a href="options-101.html#car-insurance"><i class="fa fa-check"></i><b>2.1</b> Car Insurance</a></li>
<li class="chapter" data-level="2.2" data-path="options-101.html"><a href="options-101.html#vanilla-options"><i class="fa fa-check"></i><b>2.2</b> Vanilla Options</a></li>
<li class="chapter" data-level="2.3" data-path="options-101.html"><a href="options-101.html#long-vs-short"><i class="fa fa-check"></i><b>2.3</b> Long vs Short</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html"><i class="fa fa-check"></i><b>3</b> Quantitative Indulgence</a><ul>
<li class="chapter" data-level="3.1" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#arbitrage"><i class="fa fa-check"></i><b>3.1</b> Arbitrage</a></li>
<li class="chapter" data-level="3.2" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#stocks-dividends"><i class="fa fa-check"></i><b>3.2</b> Stocks &amp; Dividends</a></li>
<li class="chapter" data-level="3.3" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#exchange-traded-funds-etfs"><i class="fa fa-check"></i><b>3.3</b> Exchange Traded Funds (ETFs)</a></li>
<li class="chapter" data-level="3.4" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#discounting-accumulating"><i class="fa fa-check"></i><b>3.4</b> Discounting &amp; Accumulating</a></li>
<li class="chapter" data-level="3.5" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#option-contracts"><i class="fa fa-check"></i><b>3.5</b> Option Contracts</a></li>
<li class="chapter" data-level="3.6" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#forward-contracts"><i class="fa fa-check"></i><b>3.6</b> Forward Contracts</a><ul>
<li class="chapter" data-level="3.6.1" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#specification-and-payoff"><i class="fa fa-check"></i><b>3.6.1</b> Specification and Payoff</a></li>
<li class="chapter" data-level="3.6.2" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#the-forward-price"><i class="fa fa-check"></i><b>3.6.2</b> The Forward Price</a></li>
<li class="chapter" data-level="3.6.3" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#valuing-a-forward-contract"><i class="fa fa-check"></i><b>3.6.3</b> Valuing a Forward Contract</a></li>
<li class="chapter" data-level="3.6.4" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#synthetic-forwards"><i class="fa fa-check"></i><b>3.6.4</b> Synthetic Forwards</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#put-call-parity"><i class="fa fa-check"></i><b>3.7</b> Put-Call Parity</a></li>
<li class="chapter" data-level="3.8" data-path="quantitative-indulgence.html"><a href="quantitative-indulgence.html#rational-option-pricing"><i class="fa fa-check"></i><b>3.8</b> Rational Option Pricing</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-markets.html"><a href="the-markets.html"><i class="fa fa-check"></i><b>4</b> The Markets</a><ul>
<li class="chapter" data-level="4.1" data-path="the-markets.html"><a href="the-markets.html#exchanges"><i class="fa fa-check"></i><b>4.1</b> Exchanges</a></li>
<li class="chapter" data-level="4.2" data-path="the-markets.html"><a href="the-markets.html#brokers"><i class="fa fa-check"></i><b>4.2</b> Brokers</a></li>
<li class="chapter" data-level="4.3" data-path="the-markets.html"><a href="the-markets.html#market-makers"><i class="fa fa-check"></i><b>4.3</b> Market-Makers</a></li>
<li class="chapter" data-level="4.4" data-path="the-markets.html"><a href="the-markets.html#other-liquidity-providers"><i class="fa fa-check"></i><b>4.4</b> Other Liquidity Providers</a></li>
<li class="chapter" data-level="4.5" data-path="the-markets.html"><a href="the-markets.html#the-buy-side"><i class="fa fa-check"></i><b>4.5</b> The Buy Side</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="profit-loss.html"><a href="profit-loss.html"><i class="fa fa-check"></i><b>5</b> Profit &amp; Loss</a><ul>
<li class="chapter" data-level="5.1" data-path="profit-loss.html"><a href="profit-loss.html#stock-pnl"><i class="fa fa-check"></i><b>5.1</b> Stock PNL</a></li>
<li class="chapter" data-level="5.2" data-path="profit-loss.html"><a href="profit-loss.html#option-pnl"><i class="fa fa-check"></i><b>5.2</b> Option PNL</a></li>
<li class="chapter" data-level="5.3" data-path="profit-loss.html"><a href="profit-loss.html#scaling-up"><i class="fa fa-check"></i><b>5.3</b> Scaling Up</a></li>
<li class="chapter" data-level="5.4" data-path="profit-loss.html"><a href="profit-loss.html#returns"><i class="fa fa-check"></i><b>5.4</b> Returns</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="option-pricing.html"><a href="option-pricing.html"><i class="fa fa-check"></i><b>6</b> Option Pricing</a><ul>
<li class="chapter" data-level="6.1" data-path="option-pricing.html"><a href="option-pricing.html#black-scholes-merton"><i class="fa fa-check"></i><b>6.1</b> Black-Scholes-Merton</a></li>
<li class="chapter" data-level="6.2" data-path="option-pricing.html"><a href="option-pricing.html#investment-risk-reduction"><i class="fa fa-check"></i><b>6.2</b> Investment Risk Reduction</a></li>
<li class="chapter" data-level="6.3" data-path="option-pricing.html"><a href="option-pricing.html#forward-replication"><i class="fa fa-check"></i><b>6.3</b> Forward Replication</a></li>
<li class="chapter" data-level="6.4" data-path="option-pricing.html"><a href="option-pricing.html#delta-hedging"><i class="fa fa-check"></i><b>6.4</b> Delta Hedging</a></li>
<li class="chapter" data-level="6.5" data-path="option-pricing.html"><a href="option-pricing.html#greeks"><i class="fa fa-check"></i><b>6.5</b> Greeks</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning Options from Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="profit-loss" class="section level1">
<h1><span class="header-section-number">5</span> Profit &amp; Loss</h1>
<p>Daily profit and loss is one of the most basic and important performance measure of an investment or trading strategy. In this chapter we detail how to calculate profit and loss for stock and options trades.</p>
<div id="stock-pnl" class="section level2">
<h2><span class="header-section-number">5.1</span> Stock PNL</h2>
</div>
<div id="option-pnl" class="section level2">
<h2><span class="header-section-number">5.2</span> Option PNL</h2>
<p>Suppose you trade an option <span class="math inline">\(\mathcal{O}\)</span> at a price <span class="math inline">\(P\)</span> on trade-date <span class="math inline">\(t_{1}\)</span>. Suppose you hold the option until expiration, which is trade-date <span class="math inline">\(t_{n}\)</span>. The letter <span class="math inline">\(i\)</span> will serve as an index over the trade-dates, so <span class="math inline">\(i = 1,\ldots,n\)</span>.</p>
<p>Let <span class="math inline">\(B_{i}\)</span> and <span class="math inline">\(A_{i}\)</span> be the end-of-day bid and ask prices of the option for trade-date <span class="math inline">\(t_{i}\)</span>. Note that <span class="math inline">\(B_{n} = A_{n} =\)</span> option-payoff. We seek to define the following:</p>
<p><strong>Daily:</strong> <span class="math inline">\(D_{i}\)</span> - the <em>daily PNL</em> for the trade as of end-of-day <span class="math inline">\(t_i\)</span>.</p>
<p><strong>TTD:</strong> <span class="math inline">\(C_{i}\)</span> - the <em>trade-to-date PNL</em> for the trade as of end-of-day <span class="math inline">\(t_i\)</span>.</p>
<p>Intuitively, the trade-to-date (TTD) PNL is the amount of money you made or lost if you unwind the trade at current market values. The daily PNL is the one day change in the trade-to-date PNL. The two concepts are interchangable in that it is possible to define TTD PNL in terms of daily PNL and vice-versa.</p>
<p>In my own work, I find it most useful to calculate daily PNLs of each trade, and then define the cummulative PNL as the sum of the dailies. I present all both alternative below, for both buys and sells.</p>
<div id="ttd-as-sum-of-daily---buy" class="section level4 unnumbered">
<h4>TTD as Sum of Daily - Buy</h4>
<span class="math display">\[\begin{align*}
D_{i} &amp;= \begin{cases} B_{1} - P &amp; i = 1 \\ B_{i} - B_{i-1} &amp; i &gt; 1 \end{cases} \\[10pt]
C_{i} &amp;= \sum_{k=1}^{i} D_{k}
\end{align*}\]</span>
<p> </p>
<p><strong>Exercise:</strong> Show that <span class="math inline">\(C_{j} = B_{j} - P\)</span>.</p>
</div>
<div id="ttd-as-sum-of-daily---sell" class="section level4 unnumbered">
<h4>TTD as Sum of Daily - Sell</h4>
<span class="math display">\[\begin{align*}
D_{i} &amp;= \begin{cases} P - A_{1} &amp; i = 1 \\ A_{i-1} - A_{i} &amp; i &gt; 1 \end{cases} \\[10pt]
C_{i} &amp;= \sum_{k=1}^{i} D_{k}
\end{align*}\]</span>
<p> </p>
<p><strong>Exercise:</strong> Show that <span class="math inline">\(C_{i} = P - A_{i}\)</span>.</p>
</div>
<div id="daily-as-change-in-ttd---buy" class="section level4 unnumbered">
<h4>Daily as Change in TTD - Buy</h4>
<span class="math display">\[\begin{align*}
C_{i} &amp;= B_{i} - P \\[10pt]
D_{i} &amp;= \begin{cases} C_{1} &amp; i = 1 \\ C_{i} - C_{i-1} &amp; i &gt; 1 \end{cases}
\end{align*}\]</span>
<p> </p>
<p><strong>Exercise:</strong> Show that both formulations of <span class="math inline">\(D_{i}\)</span> are equivalent.</p>
</div>
<div id="daily-as-change-in-ttd---sell" class="section level4 unnumbered">
<h4>Daily as Change in TTD - Sell</h4>
<span class="math display">\[\begin{align*}
C_{i} &amp;= P - A_{i} \\[10pt]
D_{i} &amp;= \begin{cases} C_{1} &amp; i = 1 \\ C_{i} - C_{i-1} &amp; i &gt; 1 \end{cases}
\end{align*}\]</span>
<p> </p>
<p><strong>Exercise:</strong> Show that both formulations of <span class="math inline">\(D_{i}\)</span> are equivalent.</p>
</div>
</div>
<div id="scaling-up" class="section level2">
<h2><span class="header-section-number">5.3</span> Scaling Up</h2>
<p>It is rare that we will calculuate the PNL of a single stock trade or options trade. Rather, we will want to calculate the PNL of a portfolio of trades. This is a trivial matter, as the daily PNL of a collection of trades is simply the sum of the daily PNL of the individual trades.</p>
<p>[CODING EXERCISE]</p>
</div>
<div id="returns" class="section level2">
<h2><span class="header-section-number">5.4</span> Returns</h2>
<p>While PNL is an important performance metric, it is often hard to interpret with first normalzing by the amount of capital required to fund the investment. This is precisely what the notion of a return is. We will let <span class="math inline">\(R_{i}\)</span> be the day <span class="math inline">\(t_{i}\)</span> be the return of a trading strategy</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-markets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="option-pricing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/rmarkdown-book/edit/master/04_profit_and_loss.Rmd",
"text": "Edit"
},
"download": ["rmarkdown.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
